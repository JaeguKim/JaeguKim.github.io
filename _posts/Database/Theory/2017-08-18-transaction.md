---
layout: post
title: "Transaction"
date: 2017-08-18
categories: [Database,Theory]
---
## 정의
데이터베이스의 상태를 변환시키는 하나의 논리적 기능을 수행하기 위한 작업의 단위

## 트랜잭션의 필요성
1. 거래의 안정성을 확보할수 있는 방법
2. 작업 수행도중 오류가 발생하면 모든 작업을 원상태로 되돌릴 수 있음

## 특성

### Atomicity
- 데이터베이스에 모두 반영되든지 아니면 전혀 반영되지 않아야한다.
- 트랜잭션 내의 모든 명령은 반드시 완벽히 수행되어야 하며, 모두가 완벽히 수행하지 않고 어느 하나라도 오류가 발생하면 트랜잭션 전부가 취소되어야 한다.

### Consistency
- 성공적으로 완료하면 언제나 일관성 있는 데이터베이스 상태로 변환한다.
- 시스템이 가지고 있는 고정요소는 트랜잭션 수행 전과 수행완료 후의 상태가 같아야 한다.

### Isolation
- 둘 이상의 트랜잭션이 동시에 병행 실행되는 경우 어느 하나의 트랜잭션 실행중에 다른 트랜잭션의 연산이 끼어들 수 없다.

### Durability :
- 성공적으로 완료된 트랜잭션의 결과는 시스템이 고장나더라도 영구적으로 반영되어야한다.

## Transaction의 장점
주된 장점은 data integrity를 보장해주는 것이다. 여러 테이블들에 데이터를 저장.업데이트하는 작업을 하는 도중 DB가 꺼졌을때 데이터를 원래의 상태로 복구할수 있어야하는데, 트랜젝션은 이러한 상황을 해결할수 있다.

## 트랜잭션의 상태
트랜잭션에는 데이터를 최종적으로 반영하는 **COMMIT**과 실패했을때 되돌리는 **ROLLBACK**이 존재.

![img](https://t1.daumcdn.net/cfile/tistory/991020485ADE85BF0D)
출처 : https://jerryjerryjerry.tistory.com/48

1. 활동 : 트랜잭션이 실행중인 상태
2. 실패 : 트랜잭션 실행중 오류가 발생하여 중단된 상태
3. 철회 : 트랜잭션 비정상적으로 종료되어 ROLLBACK 수행한 상태
4. 부분 완료 : 실행결과를 저장하지 않은 상태
5. 완료 : 트랜잭션 성공후 COMMIT 연산 실행후 상태